var K=Object.defineProperty;var y=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var N=(o,n,t)=>n in o?K(o,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[n]=t,$=(o,n)=>{for(var t in n||(n={}))A.call(n,t)&&N(o,t,n[t]);if(y)for(var t of y(n))L.call(n,t)&&N(o,t,n[t]);return o};var j=(o,n)=>{var t={};for(var s in o)A.call(o,s)&&n.indexOf(s)<0&&(t[s]=o[s]);if(o!=null&&y)for(var s of y(o))n.indexOf(s)<0&&L.call(o,s)&&(t[s]=o[s]);return t};var P=(o,n,t)=>new Promise((s,F)=>{var m=i=>{try{c(t.next(i))}catch(a){F(a)}},g=i=>{try{c(t.throw(i))}catch(a){F(a)}},c=i=>i.done?s(i.value):Promise.resolve(i.value).then(m,g);c((t=t.apply(o,n)).next())});import T from"./FormRender.53b2aa04.js";import{aX as U,ai as V,an as Y,aN as Z,ev as O,a as x,v as I,f as w,fQ as oo,aq as eo,a5 as B,aw as to,k as no,ay as R,o as k,h as z,n as q,z as D,F as ro,aB as so,j as io,aA as ao,aC as mo,aD as lo,aE as fo,az as co}from"./index.0994ffcf.js";/* empty css              *//* empty css               */import{a as po}from"./index.b32d7fc7.js";import{F as X}from"./Form.5eb5121e.js";import{b as uo,f as H}from"./index.f1ed85df.js";import{R as Q}from"./index.ec7b7cf8.js";import{C as Fo}from"./index.09d33596.js";import"./index.9ae0418a.js";import"./formItemConfig.841c582f.js";import"./componentMap.854856fa.js";import"./index.1b041e8d.js";import"./Checkbox.e8d9cfcc.js";import"./index.955360e8.js";import"./index.e13a836d.js";import"./index.06cda3f0.js";import"./index.6575f003.js";import"./index.3b1bbfdc.js";import"./index.7fc8eebd.js";import"./index.31f380d8.js";import"./useFormItem.db811efb.js";import"./RadioButtonGroup.00f6150b.js";import"./get.cad0ef5a.js";import"./index.e166860d.js";import"./eagerComputed.1f875881.js";import"./DeleteOutlined.2279352f.js";import"./transButton.5787cddc.js";import"./index.2b0b7b4b.js";import"./useFlexGapSupport.02b519a7.js";import"./index.b7f80407.js";import"./useWindowSizeFn.c35b04b1.js";import"./FullscreenOutlined.173f28f0.js";import"./index.736d5ebb.js";import"./useRefs.e7dceed1.js";import"./index.a5092513.js";import"./index.ded85ab8.js";import"./isNumber.0c8ac276.js";import"./uuid.2b29000c.js";import"./download.b3e2826c.js";import"./base64Conver.08b9f4ec.js";import"./index.a9111ac7.js";import"./index.c4b8367f.js";import"./_baseIteratee.03859d79.js";import"./useFormDesignState.ea45dabd.js";import"./Col.eef5d868.js";import"./useSize.c81b3ed4.js";function go(o){return typeof o=="function"?o:U}function W(o,n){return o&&po(o,go(n))}function Co(o,n,t,s){(()=>{const p=Z(),C=p==null?void 0:p.parent;!C||o.formConfig.schemas.forEach(d=>{W(d.componentProps,(M,e)=>{O(M)&&(d.componentProps[e]=M.bind(C))}),W(d.on,(M,e)=>{O(M)&&(d.componentProps[e]=M.bind(C))})})})();const{emit:m}=t,g=X.useForm,{resetFields:c,validate:i,clearValidate:a,validateField:h}=g(n,[]);return{validate:i,validateField:h,resetFields:c,clearValidate:a,submit:()=>P(this,null,function*(){var C,d;const p=V(Y(n.value));return m==null||m("submit",p),(d=(C=o.formConfig).submit)==null||d.call(C,p),p})}}function ho(o,n,t,s){const F=e=>uo(o.formConfig.schemas,r=>r.field===e),m=(e,r,l)=>{const f=F(e);f&&(f[r]=l)},g=(e,r,l)=>{const f=F(e);f!=null&&f.componentProps&&(["options","treeData"].includes(r)&&c(e,void 0),f.componentProps[r]=l)},c=(e,r)=>{var l;typeof e=="string"?(o.formModel[e]=r,(l=t.value)==null||l.validateField(e,r,[])):Object.keys(e).forEach(u=>{var v;o.formModel[u]=e[u],(v=t.value)==null||v.validateField(u,e[u],[])})},i=(e,r)=>{o.formConfig[e]=r},a=e=>V(o.formModel)[e],h=()=>P(this,null,function*(){return V(o.formModel)}),b=e=>{m(e,"hidden",!0)},p=e=>{typeof e=="string"?g(e,"disabled",!0):i("disabled",e!==!1)},C=e=>{m(e,"hidden",!1)},d={};return(e=>{H(e,r=>{H(e,l=>{var f;d[l.field]||(d[l.field]=new Set),((f=r.link)==null?void 0:f.includes(l.field))&&O(r.update)&&d[l.field].add(r)}),d[r.field].add(r)})})(o.formConfig.schemas),$({linkOn:d,setValue:c,getValue:a,hidden:b,show:C,set:m,get:F,setProps:g,getData:h,disable:p},s)}const Mo=x({name:"VFormCreate",components:{FormRender:T,Form:X,Row:Q},props:{fApi:{type:Object},formModel:{type:Object,default:()=>({})},formConfig:{type:Object,required:!0}},emits:["submit","change","update:fApi","update:formModel"],setup(o,n){const t=o.formConfig.layout=="vertical"?Fo:Q,{emit:s}=n,F=I(null),m=w({get:()=>o.formModel,set:u=>s("update:formModel",u)}),g=w(()=>o.formConfig.schemas&&o.formConfig.schemas.filter(u=>u.hidden!==!0)),c=oo(o,"fApi",s),{submit:i,validate:a,clearValidate:h,resetFields:b,validateField:p}=Co(o,m,n),f=ho({formConfig:o.formConfig,formData:o.formModel},n,F,{submit:i,validate:a,validateField:p,resetFields:b,clearValidate:h}),{linkOn:C}=f,d=j(f,["linkOn"]);c.value=d;const M=u=>{var S;const{schema:v,value:G}=u,{field:J}=no(v);(S=C[J])==null||S.forEach(_=>{var E;(E=_.update)==null||E.call(_,G,_,c.value)})},e=w(()=>eo(o.formConfig,["disabled","labelWidth","schemas"])),r=()=>{i()};B("formModel",m);const l=(u,v)=>{m.value[u]=v};return B("setFormModelMethod",l),{eFormModel:F,submit:i,validate:a,validateField:p,resetFields:b,clearValidate:h,handleChange:M,formModelProps:e,handleSubmit:r,setFormModel:l,formModelNew:m,wrapperComp:t,noHiddenList:g}}}),vo={class:"v-form-container"};function bo(o,n,t,s,F,m){const g=R("FormRender"),c=R("Row"),i=R("Form");return k(),z("div",vo,[q(i,co({class:"v-form-model",ref:"eFormModel",model:o.formModel},o.formModelProps),{default:D(()=>[q(c,null,{default:D(()=>[(k(!0),z(ro,null,so(o.noHiddenList,(a,h)=>(k(),io(g,{key:h,schema:a,formConfig:o.formConfig,formData:o.formModelNew,onChange:o.handleChange,setFormModel:o.setFormModel,onSubmit:o.handleSubmit,onReset:o.resetFields},ao({_:2},[a&&a.componentProps?{name:"schema.componentProps!.slotName",fn:D(()=>[mo(o.$slots,a.componentProps.slotName,lo(fo({formModel:o.formModel,field:a.field,schema:a})),void 0,!0)]),key:"0"}:void 0]),1032,["schema","formConfig","formData","onChange","setFormModel","onSubmit","onReset"]))),128))]),_:3})]),_:3},16,["model"])])}var ge=to(Mo,[["render",bo],["__scopeId","data-v-0905ebe6"]]);export{ge as default};
